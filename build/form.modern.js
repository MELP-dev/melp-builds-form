import{Grid as e,TextField as r,FormControlLabel as t,Box as n,InputLabel as l}from"@mui/material";import a,{useMemo as o,forwardRef as i,useCallback as u}from"react";import{get as s,Controller as c}from"react-hook-form";import m from"react-input-mask";import d from"@mui/material/Switch";function p(){return p=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},p.apply(this,arguments)}function v(e){var r,t;let n;if(null!=(null==(r=e.validations)?void 0:r.pattern))try{var l;n=new RegExp(null==(l=e.validations)?void 0:l.pattern)}catch(r){console.warn("Provided pattern is not a valid RegExp",e.validations.pattern)}const{min:a,max:o,minLength:i,maxLength:u}=null!=(t=e.validations)?t:{};return{required:e.required,min:a,max:o,minLength:i,maxLength:u,pattern:n}}const g={required:e=>{var r;return`${null!=(r=e.label)?r:e.key} is required`},min:e=>{var r;return`${null!=(r=e.label)?r:e.key} is too small`},max:e=>{var r;return`${null!=(r=e.label)?r:e.key} is too large`},minLength:e=>{var r;return`${null!=(r=e.label)?r:e.key} is too short`},maxLength:e=>{var r;return`${null!=(r=e.label)?r:e.key} is too long`},pattern:e=>{var r;return`${null!=(r=e.label)?r:e.key} is not valid`}};function f(e,r,t){return o(()=>{var n;return[null==t?void 0:t.type,...Object.keys(null!=(n=null==t?void 0:t.types)?n:{}).filter(e=>{var r;return null!=(null==t||null==(r=t.types)?void 0:r[e])})].filter(e=>null!=e).map(n=>{var l,a;return null!=t&&t.message?t.message:null!=(l=null==e||null==(a=e.messages)?void 0:a[null!=n?n:""])?l:r[n||"pattern"](e)})},[e,t,r])}function h(e){switch(e){case!0:return;case!1:return 0;default:return e}}var b;!function(e){e.number="number",e.text="text",e.multiline="multiline",e.group="group",e.switch="switch"}(b||(b={}));const y={xs:12};function k({control:r,size:t,layout:n,variant:l,register:o,locale:i,errors:u,hookFormControl:c,defaultMessages:m,overridables:d}){var p;return a.createElement(e,{container:!0,spacing:2},null==(p=r.children)?void 0:p.map((r,p)=>{var v,g;return a.createElement(e,Object.assign({item:!0,key:p,xs:12},null!=(v=r.span)?v:y),a.createElement(A,{register:o,control:r,defaultMessages:m,error:s(null!=u?u:{},null!=(g=null==r?void 0:r.key)?g:""),size:t,locale:i,hookFormControl:c,noLabel:!0,layout:n,variant:l,overridables:d}))}))}const x={shrink:!0};function E({control:e,size:t,layout:n,variant:l,register:i,error:u,defaultMessages:s}){const c=o(()=>({ref:i(v(e))}),[i,e]),[m]=f(e,s,u);return a.createElement(r,{error:!!u,multiline:!0,rows:4,maxRows:8,helperText:m,name:e.key,required:e.required,placeholder:e.placeholder,label:"separated"===n?"":e.label,size:t,fullWidth:!0,InputLabelProps:x,inputProps:c,variant:l})}const C=["onChange","inputRef","decimalPoint","negative"],P=i((e,r)=>{let{onChange:t,inputRef:n,decimalPoint:l=2,negative:o=!0}=e,i=function(e,r){if(null==e)return{};var t,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)r.indexOf(t=a[n])>=0||(l[t]=e[t]);return l}(e,C);const s=u(e=>{let r=e.target.value;r=r.replace(/-/g,o?(e,r)=>r>0?"":e:""),r=r.replace(/[.,]/g,l>0?(e,r,t)=>{var n,l;return t.indexOf(null!=(n=null==(l=t.match(/[.,]/g))?void 0:l[0])?n:".")!==r||0===r?"":e}:""),r=r.replace(/[^\d.,-]/g,""),l>0&&(r=r.replace(/[.,]\d+/g,e=>e.substr(0,l+1))),e.target.value=r,"function"==typeof t&&t(e)},[t,l,o]),{onBlur:c}=i,m=u(e=>{null!=e.target.value&&""!==e.target.value&&(e.target.value=(+e.target.value).toFixed(l)),"function"==typeof c&&c(e)},[l,c]);return a.createElement("input",Object.assign({ref:null!=r?r:n},i,{onBlur:m,onChange:s,inputMode:"decimal"}))}),q={shrink:!0};function z({control:e,size:t,layout:n,variant:l,error:i,defaultMessages:u,value:s,onChange:c}){const[m]=f(e,u,i),d=o(()=>({decimalPoint:h(e.decimalPoint),negative:e.negative}),[e]),{endAdornment:p,startAdornment:v}=e,g=o(()=>({inputComponent:P,endAdornment:p,startAdornment:v}),[p,v]);return a.createElement(r,{error:!!i,helperText:m,name:e.key,required:e.required,placeholder:e.placeholder,label:"separated"===n?"":e.label,size:t,fullWidth:!0,InputLabelProps:q,value:null!=s?s:"",onChange:c,inputProps:d,InputProps:g,variant:l})}function O(e){var r;const{control:t,hookFormControl:n}=e,l=o(()=>v(t),[t]);return a.createElement(c,{name:null!=(r=t.key)?r:"",rules:l,defaultValue:null,control:n,render:({onChange:r,value:t})=>a.createElement(z,Object.assign({},e,{onChange:r,value:t}))})}const L={shrink:!0};function M({control:e,size:t,layout:n,variant:l,register:i,error:u,defaultMessages:s}){const{endAdornment:c,startAdornment:d,format:p}=e,g=o(()=>{const r={ref:i(v(e))};return null!=p&&(r.mask=p,r.maskChar=""),r},[i,e,p]),[h]=f(e,s,u),b=o(()=>({endAdornment:c,startAdornment:d,inputComponent:p?m:void 0}),[c,d,p]);return a.createElement(r,{error:!!u,helperText:h,name:e.key,required:e.required,placeholder:e.placeholder,label:"separated"===n?"":e.label,size:t,fullWidth:!0,InputLabelProps:L,inputProps:g,InputProps:b,variant:l})}function w({control:e,register:r,layout:n}){return a.createElement(t,{control:a.createElement(d,{name:e.key,color:"primary",inputRef:r}),label:"separated"===n?"":e.label})}const j={[b.text]:M,[b.number]:O,[b.multiline]:E,[b.group]:k,[b.switch]:w};function A({register:r,control:t,size:i,layout:u,noLabel:s,variant:c,locale:m,error:d,errors:p,hookFormControl:v,defaultMessages:g,overridables:f}){const h=function(e,r){return o(()=>{var t,n,l,a,o;return null!=(t=null!=(n=null==r||null==(l=r.controls)?void 0:l[null!=(a=e.type)?a:""])?n:j[null!=(o=e.type)?o:""])?t:j.text},[e,null==r?void 0:r.controls])}(t,f),b=a.createElement(h,{control:t,defaultMessages:g,register:r,locale:m,size:i,overridables:f,hookFormControl:v,layout:u,variant:c,errors:p,error:d});return"separated"!==u||s?b:a.createElement(e,{container:!0,spacing:2},a.createElement(e,{item:!0,xs:12,sm:4},a.createElement(n,{paddingTop:"small"===i?1:2},a.createElement(l,{error:!!d,required:t.required},t.label))),a.createElement(e,{item:!0,xs:12,sm:8},b))}const F={xs:12};function R({controls:r,size:t,layout:n,variant:l,locale:i,useFormMethods:u,overridables:c,defaultMessages:m}){const{register:d,errors:v,control:f}=u,h=o(()=>p({},g,null!=m?m:{}),[m]);return a.createElement(e,{container:!0,spacing:2},r.map((r,o)=>{var u,m;return a.createElement(e,Object.assign({item:!0,key:o,xs:12},null!=(u=r.span)?u:F),a.createElement(A,{register:d,control:r,locale:i,hookFormControl:f,defaultMessages:h,error:s(null!=v?v:{},null!=(m=null==r?void 0:r.key)?m:""),errors:v,size:t,layout:n,variant:l,overridables:c}))}))}export{k as Group,b as MpControlType,R as MpForm,A as MpFormControl,E as Multiline,O as Number,P as NumberInput,w as Switch,M as Text,h as booleanDecimalPointToNumber,v as controlRegisterOptions,g as defaultMessages,f as useErrorMessages};
//# sourceMappingURL=form.modern.js.map
