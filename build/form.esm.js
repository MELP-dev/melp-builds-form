import{Grid as e,TextField as r,FormControlLabel as n,Box as t,InputLabel as l}from"@mui/material";import a,{useMemo as o,forwardRef as i,useCallback as u}from"react";import{get as s,Controller as c}from"react-hook-form";import m from"react-input-mask";import d from"@mui/material/Switch";function v(){return v=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},v.apply(this,arguments)}function p(e){var r,n,t;if(null!=(null==(r=e.validations)?void 0:r.pattern))try{var l;t=new RegExp(null==(l=e.validations)?void 0:l.pattern)}catch(r){console.warn("Provided pattern is not a valid RegExp",e.validations.pattern)}var a=null!=(n=e.validations)?n:{};return{required:e.required,min:a.min,max:a.max,minLength:a.minLength,maxLength:a.maxLength,pattern:t}}var f,g={required:function(e){var r;return(null!=(r=e.label)?r:e.key)+" is required"},min:function(e){var r;return(null!=(r=e.label)?r:e.key)+" is too small"},max:function(e){var r;return(null!=(r=e.label)?r:e.key)+" is too large"},minLength:function(e){var r;return(null!=(r=e.label)?r:e.key)+" is too short"},maxLength:function(e){var r;return(null!=(r=e.label)?r:e.key)+" is too long"},pattern:function(e){var r;return(null!=(r=e.label)?r:e.key)+" is not valid"}};function h(e,r,n){return o(function(){var t;return[null==n?void 0:n.type].concat(Object.keys(null!=(t=null==n?void 0:n.types)?t:{}).filter(function(e){var r;return null!=(null==n||null==(r=n.types)?void 0:r[e])})).filter(function(e){return null!=e}).map(function(t){var l,a;return null!=n&&n.message?n.message:null!=(l=null==e||null==(a=e.messages)?void 0:a[null!=t?t:""])?l:r[t||"pattern"](e)})},[e,n,r])}function b(e){switch(e){case!0:return;case!1:return 0;default:return e}}!function(e){e.number="number",e.text="text",e.multiline="multiline",e.group="group",e.switch="switch"}(f||(f={}));var y={xs:12};function k(r){var n,t=r.size,l=r.layout,o=r.variant,i=r.register,u=r.locale,c=r.errors,m=r.hookFormControl,d=r.defaultMessages,v=r.overridables;return a.createElement(e,{container:!0,spacing:2},null==(n=r.control.children)?void 0:n.map(function(r,n){var p,f;return a.createElement(e,Object.assign({item:!0,key:n,xs:12},null!=(p=r.span)?p:y),a.createElement(F,{register:i,control:r,defaultMessages:d,error:s(null!=c?c:{},null!=(f=null==r?void 0:r.key)?f:""),size:t,locale:u,hookFormControl:m,noLabel:!0,layout:l,variant:o,overridables:v}))}))}var x={shrink:!0};function E(e){var n=e.control,t=e.size,l=e.layout,i=e.variant,u=e.register,s=e.error,c=e.defaultMessages,m=o(function(){return{ref:u(p(n))}},[u,n]),d=h(n,c,s);return a.createElement(r,{error:!!s,multiline:!0,rows:4,maxRows:8,helperText:d[0],name:n.key,required:n.required,placeholder:n.placeholder,label:"separated"===l?"":n.label,size:t,fullWidth:!0,InputLabelProps:x,inputProps:m,variant:i})}var C=["onChange","inputRef","decimalPoint","negative"],P=i(function(e,r){var n=e.onChange,t=e.inputRef,l=e.decimalPoint,o=void 0===l?2:l,i=e.negative,s=void 0===i||i,c=function(e,r){if(null==e)return{};var n,t,l={},a=Object.keys(e);for(t=0;t<a.length;t++)r.indexOf(n=a[t])>=0||(l[n]=e[n]);return l}(e,C),m=u(function(e){var r=e.target.value;r=(r=(r=r.replace(/-/g,s?function(e,r){return r>0?"":e}:"")).replace(/[.,]/g,o>0?function(e,r,n){var t,l;return n.indexOf(null!=(t=null==(l=n.match(/[.,]/g))?void 0:l[0])?t:".")!==r||0===r?"":e}:"")).replace(/[^\d.,-]/g,""),o>0&&(r=r.replace(/[.,]\d+/g,function(e){return e.substr(0,o+1)})),e.target.value=r,"function"==typeof n&&n(e)},[n,o,s]),d=c.onBlur,v=u(function(e){null!=e.target.value&&""!==e.target.value&&(e.target.value=(+e.target.value).toFixed(o)),"function"==typeof d&&d(e)},[o,d]);return a.createElement("input",Object.assign({ref:null!=r?r:t},c,{onBlur:v,onChange:m,inputMode:"decimal"}))}),q={shrink:!0};function z(e){var n=e.control,t=e.size,l=e.layout,i=e.variant,u=e.error,s=e.value,c=e.onChange,m=h(n,e.defaultMessages,u)[0],d=o(function(){return{decimalPoint:b(n.decimalPoint),negative:n.negative}},[n]),v=n.endAdornment,p=n.startAdornment,f=o(function(){return{inputComponent:P,endAdornment:v,startAdornment:p}},[v,p]);return a.createElement(r,{error:!!u,helperText:m,name:n.key,required:n.required,placeholder:n.placeholder,label:"separated"===l?"":n.label,size:t,fullWidth:!0,InputLabelProps:q,value:null!=s?s:"",onChange:c,inputProps:d,InputProps:f,variant:i})}function O(e){var r,n=e.control,t=e.hookFormControl,l=o(function(){return p(n)},[n]);return a.createElement(c,{name:null!=(r=n.key)?r:"",rules:l,defaultValue:null,control:t,render:function(r){return a.createElement(z,Object.assign({},e,{onChange:r.onChange,value:r.value}))}})}var L,M={shrink:!0};function w(e){var n=e.control,t=e.size,l=e.layout,i=e.variant,u=e.register,s=e.error,c=e.defaultMessages,d=n.endAdornment,v=n.startAdornment,f=n.format,g=o(function(){var e={ref:u(p(n))};return null!=f&&(e.mask=f,e.maskChar=""),e},[u,n,f]),b=h(n,c,s)[0],y=o(function(){return{endAdornment:d,startAdornment:v,inputComponent:f?m:void 0}},[d,v,f]);return a.createElement(r,{error:!!s,helperText:b,name:n.key,required:n.required,placeholder:n.placeholder,label:"separated"===l?"":n.label,size:t,fullWidth:!0,InputLabelProps:M,inputProps:g,InputProps:y,variant:i})}function j(e){var r=e.control,t=e.layout;return a.createElement(n,{control:a.createElement(d,{name:r.key,color:"primary",inputRef:e.register}),label:"separated"===t?"":r.label})}var A=((L={})[f.text]=w,L[f.number]=O,L[f.multiline]=E,L[f.group]=k,L[f.switch]=j,L);function F(r){var n=r.register,i=r.control,u=r.size,s=r.layout,c=r.noLabel,m=r.variant,d=r.locale,v=r.error,p=r.errors,f=r.hookFormControl,g=r.defaultMessages,h=r.overridables,b=function(e,r){return o(function(){var n,t,l,a,o;return null!=(n=null!=(t=null==r||null==(l=r.controls)?void 0:l[null!=(a=e.type)?a:""])?t:A[null!=(o=e.type)?o:""])?n:A.text},[e,null==r?void 0:r.controls])}(i,h),y=a.createElement(b,{control:i,defaultMessages:g,register:n,locale:d,size:u,overridables:h,hookFormControl:f,layout:s,variant:m,errors:p,error:v});return"separated"!==s||c?y:a.createElement(e,{container:!0,spacing:2},a.createElement(e,{item:!0,xs:12,sm:4},a.createElement(t,{paddingTop:"small"===u?1:2},a.createElement(l,{error:!!v,required:i.required},i.label))),a.createElement(e,{item:!0,xs:12,sm:8},y))}var R={xs:12};function I(r){var n=r.controls,t=r.size,l=r.layout,i=r.variant,u=r.locale,c=r.useFormMethods,m=r.overridables,d=r.defaultMessages,p=c.register,f=c.errors,h=c.control,b=o(function(){return v({},g,null!=d?d:{})},[d]);return a.createElement(e,{container:!0,spacing:2},n.map(function(r,n){var o,c;return a.createElement(e,Object.assign({item:!0,key:n,xs:12},null!=(o=r.span)?o:R),a.createElement(F,{register:p,control:r,locale:u,hookFormControl:h,defaultMessages:b,error:s(null!=f?f:{},null!=(c=null==r?void 0:r.key)?c:""),errors:f,size:t,layout:l,variant:i,overridables:m}))}))}export{k as Group,f as MpControlType,I as MpForm,F as MpFormControl,E as Multiline,O as Number,P as NumberInput,j as Switch,w as Text,b as booleanDecimalPointToNumber,p as controlRegisterOptions,g as defaultMessages,h as useErrorMessages};
//# sourceMappingURL=form.esm.js.map
